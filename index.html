
<!DOCTYPE html>
<!-- Version: 31 -->
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Map with Descriptions</title>

<style>

  img {
    position: relative;
    max-width: 100%;
    height: auto;
  }

/* General styling for divs within STYLE_DESCRIPTION */
.STYLE_DESCRIPTION > div {
    margin-bottom: 16px;
    display: block; /* Ensure the divs are block-level */
}

/* Styling for the new type and name box */
.STYLE_TYPENAME {
    border: 1px solid #bbb;
    padding: 8px;
    margin: 10px 0;
    background-color: #f5f5f5; /* Subtle light color */
    border-radius: 5px;
    font-size: 0.9em; /* Slightly smaller text */
    color: #333; /* Dark gray text */
    display: inline-block; /* Fit width to content */
    clear: both; /* Prevent side-by-side layout */
}

/* Styling for the data format area */
.STYLE_DATAFORMAT {
    border: 1px solid #bbb;
    padding: 8px;
    margin: 10px 0;
    background-color: #e0e0e0; /* Slightly different subtle color */
    border-radius: 5px;
    font-size: 0.9em;
    color: #333;
    display: inline-block; /* Fit width to content */
    clear: both; /* Prevent side-by-side layout */
}

.STYLE_HEADING {
    font-size: 1.5em;
    font-weight: bold;
    display: block;
}

.STYLE_COMMENT {
    margin-top: 20px;
    font-size: 1.2em;
    border: 1px solid #ddd;
    padding: 20px;
    max-width: 100%;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    background-color: #f9f9f9;
}

.STYLE_MOUSEOVER {
    border: 2px dashed red;
    position: absolute;
    pointer-events: none;
    z-index: 1000;
}

        #content {
            display: block;
        }
        #blankMessage {
            display: none;
            text-align: center;
            font-size: 2em;
            margin-top: 20%;
        }
  .debug-highlight {
    position: absolute;
    background-color: rgba(0, 0, 0, 0.2); /* Subtle dark overlay */
    pointer-events: none;
    z-index: 999; /* Below the STYLE_MOUSEOVER z-index */
  }
  
    .debug-description {
    font-family: monospace;
    font-size: 0.8em;
    color: #f00; /* Red color for debug information */
    margin-top: 10px;
  }
</style>



</head>
<body>

<div id="content">
	<!-- Image Map -->
	<div style="position: relative; display: inline-block;">
	  <img src="HTML/ViewLogins.png" usemap="#image-map" alt="Map Image" id="mapImage">
	  <div class="STYLE_MOUSEOVER" id="id_highlightBox" style="display: none;"></div>
	</div>

	<map name="image-map">

		<area coords="15,11,35,294" shape="rect" data-default-format="my checkbox format" onmouseover="fn_showDescription('aDefault', '', 'Checkboxes', 'A quick fox jumps.', this)">
	<area coords="42,0,108,341" shape="rect"  data-default-format="my idpass format" onmouseover="fn_showDescription('aDefault', '', 'Id & Password', 'Water flows swiftly.', this)">
	<area coords="632,1,857,324" shape="rect"  data-default-format="my device format" onmouseover="fn_showDescription('aDefault', '', 'Devices', 'Blue sky is clear.', this)">
	<area coords="948,14,1027,327" shape="rect"  data-default-format="my loggedout format" onmouseover="fn_showDescription('aDefault', '', 'Logged Out', 'Cats love to nap.', this)">
	<area coords="1041,36,1150,317" shape="rect"  data-default-format="my didntotattendthing format" onmouseover="fn_showDescription('aDefault', '', 'Did not attend', 'Music soothes minds.', this)">
	<area coords="119,8,242,35" shape="rect" data-default-format="kickass name column format" onmouseover="fn_showDescription('aDefault', 'headingrow', 'mySuperNameColumn', 'Mountains stand tall.', this)">
	<area coords="872,0,936,36" shape="rect" onmouseover="fn_showDescription('aDefault', 'row7', 'col7', 'Books open worlds.', this)">
	<area coords="276,5,342,37" shape="rect" onmouseover="fn_showDescription('aDefault', 'row8', 'col8', 'Stars twinkle bright', this)">
	<area coords="115,63,225,83" shape="rect" onmouseover="fn_showDescription('aDefault', 'row9', 'mySuperNameColumn', 'Dreams fuel goals.', this)">
	<area coords="118,235,209,261" shape="rect" onmouseover="fn_showDescription('aDefault', 'row10', 'col10', 'Rain brings life.', this)">
	<area coords="116,42,221,59" shape="rect" onmouseover="fn_showDescription('aDefault', 'row11', 'mySuperNameColumn', 'Sunrise is golden.', this)">
	<area coords="114,155,211,174" shape="rect" onmouseover="fn_showDescription('aDefault', 'row13', 'col13', 'Wind whispers softly.', this)">
	<area coords="118,208,211,230" shape="rect" onmouseover="fn_showDescription('aDefault', 'row14', 'col14', 'Flowers bloom brightly.', this)">
	<area coords="117,264,212,285" shape="rect" onmouseover="fn_showDescription('aDefault', 'row15', 'col15', 'Chocolate is sweet.', this)">
	<area coords="112,177,199,199" shape="rect" onmouseover="fn_showDescription('aDefault', 'row17', 'col17', 'Ocean waves crash.', this)">
	<area coords="115,289,201,309" shape="rect" onmouseover="fn_showDescription('aDefault', 'row18', 'col18', 'Time flies fast.', this)">
	<area coords="870,121,935,140" shape="rect" onmouseover="fn_showDescription('aDefault', 'row19', 'col19', 'Lights twinkle.', this)">
	<area coords="869,45,935,87" shape="rect" onmouseover="fn_showDescription('aDefault', 'row20', 'col20', 'Coffee is hot.', this)">
	<area coords="867,215,935,256" shape="rect" onmouseover="fn_showDescription('aDefault', 'row21', 'col21', 'Winter is cold.', this)">
	<area coords="880,99,925,118" shape="rect" onmouseover="fn_showDescription('aDefault', 'row22', 'col22', 'Nature is beautiful.', this)">
	<area coords="868,154,937,203" shape="rect" onmouseover="fn_showDescription('aDefault', 'row23', 'col23', 'Bread is baked.', this)">
	<area coords="869,267,937,314" shape="rect" onmouseover="fn_showDescription('aDefault', 'row24', 'col24', 'Apples are tasty.', this)">
	<area coords="275,42,348,63" shape="rect" onmouseover="fn_showDescription('aDefault', 'row25', 'col25', 'Leaves fall down.', this)">
	<area coords="272,213,348,231" shape="rect" onmouseover="fn_showDescription('aDefault', 'row26', 'col26', 'Snow is white.', this)">
	<area coords="274,158,344,177" shape="rect" onmouseover="fn_showDescription('aDefault', 'row27', 'col27', 'Milk is refreshing.', this)">
	<area coords="266,266,348,311" shape="rect" onmouseover="fn_showDescription('aDefault', 'row28', 'col28', 'Sunsets are stunning.', this)">
	<area coords="283,68,336,83" shape="rect" onmouseover="fn_showDescription('aDefault', 'row29', 'col29', 'Fruit is healthy.', this)">
	<area coords="276,237,343,258" shape="rect" onmouseover="fn_showDescription('aDefault', 'row31', 'col31', 'Cars drive fast.', this)">
	
	<area coords="114,98,214,119" shape="rect" onmouseover="fn_showDescription('aDefault', 'billy franks', 'mySuperNameColumn', 'Fire warms us.', this)">
	<area coords="116,123,251,142" shape="rect" onmouseover="fn_showDescription('aDefault', 'billy franks', 'mySuperNameColumn', 'Laughter is contagious.', this)">
	<area coords="283,127,333,138" shape="rect" onmouseover="fn_showDescription('aDefault', 'billy franks', 'Status', 'Ice cream melts.', this)">
	<area coords="271,101,350,121" shape="rect" onmouseover="fn_showDescription('aDefault', 'billy franks', 'Status', 'Rivers flow wide.', this)">
	</map>





	<!-- Description Area -->
	<div id="id_description" class="STYLE_DESCRIPTION">Hover over an area to see the description here.</div>

</div>

<div id="blankMessage">Please resize the window to restore the content.</div>


<script>
	const gColumnFormats = {}; //global variable to store the various column formats

	
	// Base class for both rows and columns
	class class_Root
	{
		constructor(pType, pRow, pColumn, pText, pName,pDataFormat)
		{
			this.mType=pType;
			this.mRow=pRow;
			this.mColumn=pColumn;
			this.mText=pText;
			this.mName=pName;
			this.mDataFormat=pDataFormat;
		}

		get_strHTMLTemplate() {
			return `			
<div id="id_description" class="STYLE_DESCRIPTION">
    <div class='STYLE_HEADING'>
        <table>
            <tbody>
                <tr>
                    <td>{{REPLACE_ROW_NAME}}</td>
                    <td>{{REPLACE_COL_NAME}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class='STYLE_DATAFORMAT'>{{REPLACE_DATAFORMAT}}</div>
  <div class='STYLE_TYPENAME'>
        <table>
            <tbody>
                <tr>
                    <td>Type: {{REPLACE_TYPE}}</td>
                    <td>Name: {{REPLACE_NAME}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class='STYLE_COMMENT'>{{STYLE_COMMENT}}</div>
  
</div>

				`;
		}
	}

	// Specific types extending the base class
	class class_Default extends class_Root
	{
		constructor(pType, pRow, pColumn, pText, pName,pDataFormat)
		{
			super(pType, pRow, pColumn, pText, pName,pDataFormat); // Call the parent constructor with both parameters
		}

			fn_SubstituteVariables() {
			// Call the parent class's renderContent method
			let parentContent = super.get_strHTMLTemplate();

			// Replace the placeholders with the specific content
			parentContent = parentContent.replace('{{REPLACE_ROW_NAME}}', this.mRow);
			parentContent = parentContent.replace('{{REPLACE_COL_NAME}}', this.mColumn);
			parentContent = parentContent.replace('{{REPLACE_DATAFORMAT}}', this.mDataFormat);
				parentContent = parentContent.replace('{{REPLACE_TYPE}}', this.mType);
				parentContent = parentContent.replace('{{REPLACE_NAME}}', this.mName);
			parentContent = parentContent.replace('{{STYLE_COMMENT}}', this.mText);

			return parentContent;
		}
	}


	function fn_whatWasProvided(pRow,pColumn)
	{
		let lstr_RowColStatus;
		
		if(!pRow && !pColumn){lstr_RowColStatus = 'NoRowOrColumn'}
		else if (pRow && !pColumn){lstr_RowColStatus = 'JustRow'}
		else if (!pRow && pColumn){lstr_RowColStatus = 'JustColumn'}
		else if (pRow && pColumn) {lstr_RowColStatus = 'RowAndColumn'}
		


		switch (lstr_RowColStatus)// placeholder  - should probably do something useful
		{
			case 'NoRowOrColumn':
				return 'NoRowOrColumn';
			case 'JustRow':
				return 'JustRow';
			case 'JustColumn':
				return 'JustColumn';
			case 'RowAndColumn':
				return 'RowAndColumn';
			default:
				return;
		}

	}


	function fn_getName(pRow,pColumn)
	{
			switch (fn_whatWasProvided(pRow,pColumn))
			{
				case 'NoRowOrColumn':
					return '';
				case 'JustRow':
					return pRow;
				case 'JustColumn':
					return pColumn;
				case 'RowAndColumn':
					return pRow+pColumn
				default:
					return '';
			}
	}


	function fn_createElementInstance(pType, pRow, pColumn, pText, pName, pDataFormat)
	{
		switch (pType.toLowerCase())
		{
			case 'adefault':
				return new class_Default(pType, pRow, pColumn, pText, pName,pDataFormat)
			default:
				return new class_Root(pType, pRow, pColumn, pText, pName,pDataFormat);
		}
	}

function fn_getFormat(pColumn, pthis_Area) {
    let lFormat;

    switch (true) {
        case !!pthis_Area.dataset.defaultFormat:
            lFormat = pthis_Area.dataset.defaultFormat;
            gColumnFormats[pColumn] = lFormat; // Save the default format
            break; // Set the default format

        case !!gColumnFormats[pColumn]:
            lFormat = gColumnFormats[pColumn];
            break; // Use the default format if no override

        case !!pthis_Area.dataset.overrideFormat:
            lFormat = pthis_Area.dataset.overrideFormat;
            break; // Override the format

        default:
            lFormat = 'defaultFormat'; // Your predefined default value
            break; // Use predefined default format
    }

    return lFormat;
}

function fn_showDescription(pType, pRow, pColumn, pText, pthis_Area) {
    const lFormat = fn_getFormat(pColumn, pthis_Area);
    let elementInstance = fn_createElementInstance(pType, pRow, pColumn, pText, fn_getName(pRow, pColumn), lFormat);
    let descriptionContent = elementInstance.fn_SubstituteVariables();

    // Add debug information if in debug mode
    if (isDebugMode) {
        const lineNumber = getLineNumber(pthis_Area);
        descriptionContent += `<div class="debug-description">HTML Line Number: ${lineNumber}</div>`;
    }

    document.getElementById('id_description').innerHTML = descriptionContent;

    // Highlight the area
    fn_highlightArea(pthis_Area);

    // Add event listener to hide highlight on mouseout
    pthis_Area.onmouseout = fn_hideHighlight;
}





	


function fn_highlightArea(pthis_Area) {
    const img = document.getElementById('mapImage');
    const highlight = document.getElementById('id_highlightBox');
    const { scaleX, scaleY } = getScalingFactors(img);

    const coords = pthis_Area.coords.split(',').map(Number);
    const x1 = coords[0] * scaleX;
    const y1 = coords[1] * scaleY;
    const x2 = coords[2] * scaleX;
    const y2 = coords[3] * scaleY;

    highlight.style.left = `${x1}px`;
    highlight.style.top = `${y1}px`;
    highlight.style.width = `${x2 - x1}px`;
    highlight.style.height = `${y2 - y1}px`;
    highlight.style.display = 'block';
}

function fn_hideHighlight() {
    document.getElementById('id_highlightBox').style.display = 'none';
    document.getElementById('id_description').innerHTML = "Hover over an area to see the description here.";
}


const isDebugMode = true; // Enable or disable debugging

function highlightAreasInDebugMode() {
    const img = document.getElementById('mapImage');
    const { scaleX, scaleY } = getScalingFactors(img);
    const areas = document.querySelectorAll('area');

    // Remove existing debug highlights
    document.querySelectorAll('.debug-highlight').forEach(el => el.remove());

    areas.forEach(area => {
        const coords = area.coords.split(',').map(Number);
        const highlight = document.createElement('div');
        highlight.classList.add('debug-highlight');

        const x1 = coords[0] / scaleX;
        const y1 = coords[1] / scaleY;
        const x2 = coords[2] / scaleX;
        const y2 = coords[3] / scaleY;

        highlight.style.left = `${x1}px`;
        highlight.style.top = `${y1}px`;
        highlight.style.width = `${x2 - x1}px`;
        highlight.style.height = `${y2 - y1}px`;

        img.parentElement.appendChild(highlight);
    });
}

function getScalingFactors(img) {
    const naturalWidth = img.naturalWidth;
    const naturalHeight = img.naturalHeight;
    const currentWidth = img.clientWidth;
    const currentHeight = img.clientHeight;
    const scaleX = naturalWidth / currentWidth;
    const scaleY = naturalHeight / currentHeight;
    return { scaleX, scaleY };
}

function getLineNumber(element) {
    // Get the full HTML content of the document
    const html = document.documentElement.outerHTML;
    
    // Get the HTML content of the element
    const elementHtml = element.outerHTML;

    // Find the index of the element's HTML within the document's HTML
    const index = html.indexOf(elementHtml);

    // Get the substring before the element's HTML
    const beforeElementHtml = html.substring(0, index);

    // Count the number of newlines in the substring before the element
    const linesBeforeElement = beforeElementHtml.split(/\r\n|\r|\n/).length;

    // Add an offset for any additional lines not counted (if necessary)
    const offset = 4; // Adjust this value based on your findings

    // Return the adjusted line number
    return linesBeforeElement + offset;
}






function checkImageSize() {
    const img = document.getElementById('mapImage');
    const content = document.getElementById('content');
    const blankMessage = document.getElementById('blankMessage');

    console.log(`Image dimensions: ${img.clientWidth}x${img.clientHeight}`);
    console.log(`Natural dimensions: ${img.naturalWidth}x${img.naturalHeight}`);

    if (img.clientWidth !== img.naturalWidth || img.clientHeight !== img.naturalHeight) {
        console.log('Image is resized, hiding content');
        content.style.visibility = 'hidden';
        content.style.opacity = '0';
        blankMessage.style.display = 'block';
    } else {
        console.log('Image is not resized, showing content');
        content.style.visibility = 'visible';
        content.style.opacity = '1';
        blankMessage.style.display = 'none';

        if (isDebugMode) {
            highlightAreasInDebugMode();
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const areas = document.querySelectorAll('area');
    areas.forEach(area => {
        area.dataset.originalCoords = area.coords;
    });

    const img = document.getElementById('mapImage');
    if (!img) {
        console.error('Image with id "mapImage" not found');
        return;
    } else {
        console.log('Image found:', img);
    }

    if (areas.length === 0) {
        console.error('No areas found');
        return;
    } else {
        console.log(`Number of areas found: ${areas.length}`);
    }

    if (isDebugMode) {
        highlightAreasInDebugMode();
    }

    // Ensure initial check for image size
    checkImageSize();
});

window.addEventListener('resize', () => {
    checkImageSize();
    if (isDebugMode) {
        highlightAreasInDebugMode();
    }
});

console.log('Script executed');
</script>

</body>
</html>
